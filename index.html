<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Study Dashboard</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- 로그인 화면 -->
    <section id="loginScreen" class="login-section">
        <h2>Welcome</h2>
        <label for="usernameInput" class="hidden-label">Email</label>
        <input type="email" id="usernameInput" placeholder="Email" required>
        <label for="passwordInput" class="hidden-label">Password</label>
        <input type="password" id="passwordInput" placeholder="Password" required>
        <button class="btn login-btn" onclick="login()">Login</button>
        <button class="btn register-btn" onclick="register()">Register</button>
        <div id="loginMessage" class="login-message"></div>
    </section>

    <!-- 네비게이션 드로어 -->
    <div class="nav-drawer hidden">
        <span class="hamburger-icon" onclick="toggleDrawer()">☰</span>
        <div class="overlay hidden" onclick="closeDrawer()"></div>
        <div class="drawer-content hidden">
            <div class="nav-item active" onclick="showScreen('home')">Home</div>
            <div class="nav-item" onclick="showScreen('study')">Study</div>
            <div class="nav-item" onclick="showScreen('todo')">To-Do</div>
            <div class="nav-item" onclick="showScreen('diary')">Journal</div>
            <div class="nav-item" onclick="showScreen('goals')">Goals</div>
            <div class="nav-item" onclick="showScreen('stats')">Statistics</div>
            <button class="btn reset-btn" onclick="resetAllSettings()">Reset All</button>
            <button class="btn logout-btn" onclick="logout()">Logout</button>
        </div>
    </div>

    <!-- 메인 콘텐츠 -->
    <main class="main-content">
        <div class="container">
            <!-- 홈 화면 -->
            <section id="homeScreen" class="hidden">
                <div class="dashboard">
                    <div class="widget full-width" onclick="showScreen('diary')">
                        <h3 id="calendarTitle"></h3>
                        <div id="calendar" class="calendar-grid"></div>
                        <div id="dayDetails" class="day-details hidden">
                            <h3 id="selectedDate"></h3>
                            <p>Study Time: <span id="studyTimeDetail"></span></p>
                            <p id="memoDetail" class="memo-detail hidden"></p>
                            <div id="dayImagePreview"></div>
                        </div>
                    </div>
                    <div class="widget" onclick="showScreen('study')">
                        <h3>Today's Study</h3>
                        <div class="big-text" id="dashboardStudyTime">0h 0m 0s</div>
                    </div>
                    <div class="widget" onclick="showScreen('todo')">
                        <h3>To-Do Preview</h3>
                        <ul id="dashboardTodoPreview" class="todo-preview"></ul>
                    </div>
                    <div class="widget" onclick="showScreen('diary')">
                        <h3>Recent Journal</h3>
                        <div id="dashboardDiary" class="diary-preview"></div>
                    </div>
                    <div class="widget" onclick="showScreen('goals')">
                        <h3>Goal Progress</h3>
                        <div id="dashboardGoalProgress" class="goal-preview"></div>
                    </div>
                </div>
            </section>

            <!-- 공부 화면 -->
            <section id="studyScreen" class="timer-section hidden">
                <h2>Study Timer</h2>
                <div id="timerDisplay" class="timer-display">00:00:00</div>
                <input type="text" id="subjectInput" class="subject-input" placeholder="Add a subject">
                <button class="btn subject-add-btn" onclick="addSubject()">Add</button>
                <select id="subjectSelect" class="subject-select"></select>
                <div class="timer-controls">
                    <button class="btn timer-btn start-btn" onclick="startTimer()">Start</button>
                    <button class="btn timer-btn pause-btn" onclick="pauseTimer()">Pause</button>
                    <button class="btn timer-btn stop-btn" onclick="stopTimer()">Stop</button>
                </div>
                <div class="study-stats">
                    <h3>Today's Study Time</h3>
                    <div id="dailyStudyTime">0h 0m 0s</div>
                    <div id="subjectTimes" class="subject-time"></div>
                </div>
            </section>

            <!-- 다이어리 화면 -->
            <section id="diaryScreen" class="diary-section hidden">
                <h2>Journal</h2>
                <input type="date" id="diaryDate">
                <div class="mood-beans">
                    <div class="mood-bean happy" onclick="selectMood('happy')"><img src="very_happy.png" alt="Happy"></div>
                    <div class="mood-bean calm" onclick="selectMood('calm')"><img src="happy.png" alt="Calm"></div>
                    <div class="mood-bean neutral" onclick="selectMood('neutral')"><img src="calm.png" alt="Neutral"></div>
                    <div class="mood-bean sad" onclick="selectMood('sad')"><img src="sad.png" alt="Sad"></div>
                    <div class="mood-bean angry" onclick="selectMood('angry')"><img src="angry.png" alt="Angry"></div>
                </div>
                <textarea id="memoInput" class="memo-input" placeholder="Write about your day..."></textarea>
                <input type="file" id="diaryImage" accept="image/*" class="hidden">
                <button class="btn image-upload-btn" onclick="triggerFileInput()">Upload Image</button>
                <div id="imagePreview"></div>
                <button class="btn save-button" onclick="saveDiary()">Save Entry</button>
            </section>

            <!-- 투두 화면 -->
            <section id="todoScreen" class="todo-section hidden">
                <h2>To-Do List</h2>
                <input type="text" id="todoInput" class="todo-input" placeholder="Add a new task">
                <button class="btn todo-add-btn" onclick="addTodo()">Add</button>
                <div class="task-filters">
                    <button class="filter-btn active" onclick="filterTasks('all')">All</button>
                    <button class="filter-btn" onclick="filterTasks('active')">Active</button>
                    <button class="filter-btn" onclick="filterTasks('completed')">Completed</button>
                </div>
                <ul id="todoList" class="todo-list"></ul>
                <div class="todo-stats">
                    <span id="todoCount">0 tasks remaining</span>
                    <button class="clear-btn" onclick="clearCompleted()">Clear Completed</button>
                </div>
            </section>

            <!-- 목표 화면 -->
            <section id="goalsScreen" class="goals-section hidden">
                <h2>Goals</h2>
                <div class="goal-inputs">
                    <div class="goal-period">
                        <h4>Daily Goal:</h4>
                        <input type="number" id="dailyGoal" min="0" placeholder="Hours">
                        <button class="btn" onclick="saveGoal('daily')">Save</button>
                    </div>
                    <div class="goal-period">
                        <h4>Weekly Goal:</h4>
                        <input type="number" id="weeklyGoal" min="0" placeholder="Hours">
                        <button class="btn" onclick="saveGoal('weekly')">Save</button>
                    </div>
                </div>
                <div id="goalProgress" class="goal-progress"></div>
            </section>

            <!-- 통계 화면 -->
            <section id="statsScreen" class="stats-section hidden">
                <h2>Statistics</h2>
                <div class="week-controls">
                    <button class="btn" onclick="changeWeek(-1)">Previous</button>
                    <span id="weekRange"></span>
                    <button class="btn" onclick="changeWeek(1)">Next</button>
                </div>
                <div id="weekCalendar" class="week-calendar"></div>
                <div id="statsDetails" class="stats-details hidden">
                    <h3 id="statsSelectedDate"></h3>
                    <div id="statsStudyTime"></div>
                    <div id="statsSubjects"></div>
                    <div id="statsDiary"></div>
                </div>
            </section>
        </div>
    </main>

    <!-- JavaScript 모듈 방식으로 불러오기 -->
    <script type="module" src="script.js"></script>
</body>
</html>